- name: Run RCU to create schemas with SSL, SYS, and component passwords
  expect:
    command: >
      ./rcu -silent -createRepository
      -connectString {{ db_host }}:{{ db_port_ssl }}:{{ db_service }}
      -dbUser sys
      -dbRole sysdba
      -useSSL
      -sslArgs
      javax.net.ssl.trustStore={{ wallet_dir }}/ewallet.p12,
      javax.net.ssl.trustStoreType=PKCS12,
      javax.net.ssl.keyStore={{ wallet_dir }}/ewallet.p12,
      javax.net.ssl.keyStoreType=PKCS12,
      oracle.net.ssl_server_dn_match=true,
      oracle.net.authentication_services=TCPS
      -sslPasswordArgNames javax.net.ssl.keyStorePassword,javax.net.ssl.trustStorePassword
      -schemaPrefix {{ schema_prefix }}
      -component STB -component MDS
      -serverDN CN={{ db_host }}
    responses:
      '.*javax.net.ssl.keyStorePassword.*': "{{ keystore_password }}"
      '.*javax.net.ssl.trustStorePassword.*': "{{ truststore_password }}"
      '.*database password.*': "{{ db_sys_password }}"
      '.*password for schema component.*STB.*': "{{ stb_password }}"
      '.*password for schema component.*MDS.*': "{{ mds_password }}"
  args:
    chdir: "{{ fmw_home }}/oracle_common/bin"
  vars:
    keystore_password: "YOUR_KEYSTORE_PASS"
    truststore_password: "YOUR_TRUSTSTORE_PASS"
    db_sys_password: "YOUR_DB_PASSWORD"
    stb_password: "YOUR_STB_PASSWORD"
    mds_password: "YOUR_MDS_PASSWORD"
